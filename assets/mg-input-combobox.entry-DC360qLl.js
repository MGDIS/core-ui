import{r as I,c as b,h as a,g as F}from"./iframe-6DGX90e-.js";import{P as g,C as E,f as x,a as m,t as d,n as z,g as v,b as D,i as k,c as y,d as R}from"./index-C7xjtdiw-i2s6seYr.js";import{c as O,a as C,w as M}from"./mg-input.conf-D9V2v4n2-BdW02cpZ.js";import{i as P}from"./index-CNX6lq0x-CqaQyRKq.js";import{K as n}from"./events.utils-yMGqY8YG-B1zQ2iuP.js";import"./preload-helper-PPVm8Dsz.js";const T=".mg-c-input__box{height:var(--mg-b-size-min-height);box-sizing:border-box;padding:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2) var(--mg-b-size-8);border-width:var(--mg-c-input-border-width);border-style:solid;border-color:var(--mg-c-input-color-border);border-radius:var(--mg-c-input-border-radius);background-color:var(--mg-b-color-light);color:var(--mg-b-color-dark);font-family:inherit;font-size:var(--mg-b-font-size);text-align:var(--mg-c-input-text-align, left)}.mg-c-input__box::placeholder{color:var(--mg-c-input-placeholder-color-text);font-style:italic}.mg-c-input__box:focus{box-shadow:0 0 var(--mg-b-size-4) var(--mg-c-input-color-box-shadow-focus)}.mg-c-input__box:disabled{opacity:var(--mg-b-opacity-element-disabled)}.mg-c-input.mg-c-input--has-error .mg-c-input__box{border-color:var(--mg-b-color-danger)}.mg-c-input.mg-c-input--is-input-group-append{--mg-c-button-border-radius-top-left:0;--mg-c-button-border-radius-bottom-left:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box{margin-right:calc(-1*var(--mg-b-size-border));border-bottom-right-radius:0;border-top-right-radius:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box:focus-visible{outline-offset:-0.2rem;outline-style:solid;outline-width:.2rem}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]){--mg-c-button-border-radius-top-right:0;--mg-c-button-border-radius-bottom-right:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:not(:last-of-type)){--mg-c-button-border-right-width:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:last-of-type){--mg-c-button-border-radius-top-right:var(--mg-c-input-border-radius);--mg-c-button-border-radius-bottom-right:var(--mg-c-input-border-radius)}.mg-c-input.mg-c-input--is-append-input-slot-content:not(.mg-c-input--readonly) ::slotted([slot=append-input]){align-self:start;padding-top:calc((var(--mg-b-size-min-height) - var(--mg-b-size-16))/2)}.mg-c-input.mg-c-input--has-icon .mg-c-input__with-character-left>mg-icon:first-of-type,.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container>mg-icon:first-of-type{position:absolute;top:50%;left:var(--mg-b-size-8);color:var(--mg-c-input-color-icon);transform:translateY(-50%)}.mg-c-input.mg-c-input--has-icon .mg-c-input__with-character-left .mg-c-input__box,.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container .mg-c-input__box{padding-left:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2)}.mg-c-input__popover-info{padding:var(--mg-b-size-8);margin:0;color:var(--mg-b-color-neutral-90);text-align:center}.mg-c-input__input-container{width:100%;flex:1 auto}.mg-c-input.mg-c-input--width-full .mg-c-input__box{width:100%}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left,.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left,.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left{width:max-content}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left:has(textarea),.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left:has(textarea),.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left:has(textarea){flex-grow:inherit}.mg-c-input.mg-c-input--width-2 .mg-c-input__box{width:var(--mg-b-size-48)}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(var(--mg-b-size-48) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-4 .mg-c-input__box{width:var(--mg-b-size-72)}.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(var(--mg-b-size-72) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-16 .mg-c-input__box{width:calc(26*var(--mg-b-size-8))}.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(calc(26 * var(--mg-b-size-8)) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-full:not(.mg-c-input--label-on-top){justify-content:stretch}.mg-c-input.mg-c-input--is-input-group-append ::slotted([slot=append-input]),.mg-c-input.mg-c-input--is-append-input-slot-content ::slotted([slot=append-input]){width:auto}:host(.mg-c-input.mg-c-input--width-full) ::slotted(*:not(mg-input-title)){width:100%;max-width:100%}.mg-c-input__readonly-value{min-height:var(--mg-b-font-size);align-self:flex-start;margin-top:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2);overflow-wrap:anywhere}.mg-u-visually-hidden{position:absolute !important;overflow:hidden !important;width:.1rem !important;height:.1rem !important;padding:0 !important;border:0 !important;margin:-0.1rem !important;clip:rect(0.1rem, 0.1rem, 0.1rem, 0.1rem) !important;clip-path:inset(50%) !important;white-space:nowrap !important}*:focus:not(:focus-visible){outline:none}@media (prefers-reduced-motion){*{animation:none !important;transition:none !important}}a{color:inherit;text-decoration:underline}a:hover,a:focus,a:active{text-decoration:none}.mg-c-input.mg-c-input--combobox mg-popover{--mg-c-card-overflow:hidden;--mg-c-popover-padding-vertical:0;--mg-c-popover-padding-horizontal:0}.mg-c-input.mg-c-input--combobox .mg-c-input__input-group-container{position:relative}.mg-c-input.mg-c-input--combobox .mg-c-input__box{cursor:pointer}.mg-c-input.mg-c-input--combobox .mg-c-input__popover-container{display:flex;min-width:var(--mg-c-input-list-width);max-height:calc(50*var(--mg-b-size-8) - var(--mg-b-size-32));flex-direction:column;gap:var(--mg-b-size-4);overflow-y:scroll}.mg-c-input.mg-c-input--combobox .mg-c-input__load-more{padding:0 var(--mg-b-size-8) var(--mg-b-size-4)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list{padding:0;margin:0;cursor:pointer;list-style:none}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item{display:flex;padding:var(--mg-b-size-8)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item:hover,.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--focus-visible{background-color:var(--mg-b-color-neutral-20)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected{font-weight:700}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected mg-icon{margin-left:auto}.mg-c-input.mg-c-input--combobox.mg-c-input--width-2 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-24) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-4 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-48) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-16 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + calc(23 * var(--mg-b-size-8)) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full mg-popover{--mg-c-popover-max-width:var(--mg-c-input-list-width, var(--mg-c-popover-max-width))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__input-group-container{display:flex;width:100%}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__box{flex:1}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box{padding-right:calc(var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box-append{position:absolute;top:0;right:0}",f=t=>t&&typeof t=="object"&&typeof t.title=="string"&&t.value!==void 0,W=t=>Array.isArray(t)&&t.every(f),A=t=>{const i=y(t)&&Object.hasOwn(t,"request")&&Object.hasOwn(t,"response");if(i){const{request:e,response:o}=t;if([e,o].some(u=>!y(u)))return!1;const s=typeof e.filter=="string",r=typeof o=="object"&&typeof o.total=="string"&&typeof o.items=="string"&&typeof o.next=="string"&&typeof o.itemTitle=="string"&&(typeof o.itemValue=="string"||o.itemValue===void 0);return s&&r}else return i},L=class{constructor(t){I(this,t),this.valueChange=b(this,"value-change",7),this.filterChange=b(this,"filter-change",7),this.showMore=b(this,"load-more",7),this.inputValid=b(this,"input-valid",7),this.fetchError=b(this,"fetch-error",7),this.classFocus="mg-u-is-focused",this.hasDisplayedError=!1,this.customErrorMessage={lock:!1},this.name=this.identifier,this.labelOnTop=!1,this.labelHide=!1,this.required=!1,this.readonly=!1,this.disabled=!1,this.mgWidth="full",this.tooltipPosition="input",this.options=new g([]),this.filter="",this.classCollection=new E(["mg-c-input--combobox","mg-c-input--has-icon","mg-c-input--input-append"]),this.popoverDisplay=!1,this.handleOptionClick=i=>{this.setValue(this.options.items.find(e=>x(e.value)===i.target.id)),this.popoverDisplay=!1},this.handleResetButton=i=>{i.stopPropagation(),this.reset().then(()=>{this.input.focus()})},this.handlePopoverDisplay=i=>{this.popoverDisplay=i.detail},this.handleFilterInput=()=>{this.checkValidity(),this.hasDisplayedError&&this.setErrorMessage(),this.popoverDisplay||(this.popoverDisplay=!0),this.debounce||(this.debounce=!0,setTimeout(()=>{this.filter=this.input.value,this.debounce=!1},250))},this.handleFilterBlur=()=>{this.popoverDisplay||(this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))},this.handleFilterFocus=()=>{this.isLoading||(this.option=null)},this.handleLoadMoreButton=()=>{this.loadingWrapper({name:"load-more",cursor:m.NEXT}).then(()=>{this.input.focus()})},this.handleFilterKeydown=i=>{var e;if(this.disabled||i.ctrlKey||i.shiftKey)return;let o=!1;switch(i.key){case n.TAB:case n.ENTER:{o=i.key===n.ENTER;const s=(e=this.option)!==null&&e!==void 0?e:this.options.items.find(this.isCurrentOption);this.popoverDisplay&&this.setValue(s),this.popoverDisplay=!1;break}case n.DOWN:case n.ARROWDOWN:case n.UP:case n.ARROWUP:{if(o=!0,this.isLoading||this.page.total===0){this.popoverDisplay=!0;break}if(i.altKey&&[n.DOWN,n.ARROWDOWN].includes(i.key)){this.popoverDisplay=!0;break}let s;const r=this.popoverDisplay&&f(this.option);[n.DOWN,n.ARROWDOWN].includes(i.key)?s=r?m.NEXT:m.FIRST:[n.UP,n.ARROWUP].includes(i.key)&&(s=r?m.PREVIOUS:m.LAST),this.loadingWrapper({name:"scroll",cursor:s}),this.popoverDisplay=!0;break}case n.LEFT:case n.ARROWLEFT:case n.HOME:case n.RIGHT:case n.ARROWRIGHT:case n.END:{if(!f(this.option))break;o=!0,this.option=null;let s;n.HOME===i.key?s=0:n.END===i.key&&(s=this.filter.length),typeof s=="number"&&this.input.setSelectionRange(s,s);break}case n.ESC:case n.ESCAPE:{o=!0,this.popoverDisplay?this.popoverDisplay=!1:(this.setValue(null),this.filter="",this.option=null);break}default:{this.option=null;break}}o&&(i.stopPropagation(),i.preventDefault())},this.scrollToIndex=i=>{requestAnimationFrame(()=>{var e;this.popoverDisplay&&((e=this.element.shadowRoot.querySelector(`li:nth-of-type(${(i||0)+this.page.baseIndex})`))===null||e===void 0||e.scrollIntoView({block:"nearest"}))})},this.isCurrentOption=i=>(f(this.value)?this.value.value:this.value)===i.value,this.getValueTitle=()=>this.value&&f(this.value)?this.value.title:typeof this.value=="string"?this.value:"",this.checkValidity=()=>{this.setValidity(this.readonly||this.disabled||this.input.checkValidity())},this.setErrorMessage=(i=!1)=>{this.errorMessage=void 0,this.valid||(i||this.customErrorMessage.lock&&this.customErrorMessage.message!==void 0?this.errorMessage=this.customErrorMessage.message:this.input.validity.valueMissing&&(this.errorMessage=this.messages.errors.required))},this.optionsFilter=i=>this.filter===""?!0:i.title.toLocaleLowerCase().includes(this.filter.toLocaleLowerCase()),this.loadingWrapper=i=>{var e;let o,s;if((e=this.loadingAction)!==null&&e!==void 0||(this.loadingAction=i.name),this.option&&this.loadingAction!=="load-more"?s=this.page.items.findIndex(r=>d(r.value)===d(this.option.value)):this.loadingAction==="load-more"&&(s=this.page.items.length-this.page.baseIndex),i.name==="load-more")this.isLoading=!0,o=this.goToNextPage;else if(i.cursor===m.NEXT&&this.page.items.length<=this.page.total&&s+this.page.baseIndex===this.page.items.length&&s+this.page.baseIndex<this.page.total){this.loadMoreElement.click();return}else i.name==="scroll"?o=z:o=this.updatePage;return o().then(()=>{const r=this.options.items.filter(this.optionsFilter);i.name!=="load-data"&&(s=this.page.getIndexFromCursor(i.cursor,this.loadingAction==="load-more"&&s>=0?r[s]:this.option)),this.option=r[s],this.scrollToIndex(s)}).finally(()=>{requestAnimationFrame(()=>{this.isLoading=!1,this.loadingAction=void 0})})},this.goToNextPage=()=>(this.showMore.emit(),this.fetchurl!==void 0?this.getOptions(typeof this.page.next=="string"?this.page.next:void 0).then(i=>{if(i!==void 0){const e=[...this.page.items,...i.items];this.options=new g(e,{total:i.total,next:i.next,top:e.length})}}):z(()=>{if(typeof this.page.next=="function"){const i=this.page.next();this.page=new R(Object.assign(Object.assign({},i),{items:[...this.page.items,...i.items]}))}})),this.updatePage=async()=>{if(this.fetchurl!==void 0)return this.getOptions().then(i=>{i!==void 0&&(this.options=new g(i.items,{total:i.total,next:i.next,top:i.top}))});this.page=this.options.getPage(0,this.optionsFilter)},this.getOptions=async(i=this.fetchurl)=>{const e=(typeof i=="string"?i:i.toString()).replaceAll(this.fetchmappings.request.filter,encodeURIComponent(this.filter));try{const o=await fetch(e,this.fetchoptions);if(!o.ok){this.fetchError.emit(new Error(`${o.status} - ${o.statusText}`));return}const s=await o.json(),r=v(s,this.fetchmappings.response.items).map(c=>({title:v(c,this.fetchmappings.response.itemTitle),value:this.fetchmappings.response.itemValue!==void 0?v(c,this.fetchmappings.response.itemValue):c})),u=Number(v(s,this.fetchmappings.response.total,0));let h=v(s,this.fetchmappings.response.next);if(URL.canParse(e)&&h&&!URL.canParse(h)){const c=new URL(e);c.pathname.endsWith(h.split("?")[0])&&(h=new URL(h,c).toString())}return{items:r,total:u,next:h,top:r.length}}catch(o){this.fetchError.emit(o)}}}watchValue(t){this.filter=this.getValueTitle(),this.valueChange.emit(t)}watchItems(t){if(!(this.fetchurl!==void 0&&t===void 0)){if(this.fetchurl!==void 0&&t!==void 0)throw new Error(`<mg-input-combobox> prop "items" values cannot be use with "fetchurl" prop defined. Passed value: ${d(t)}.`);if(Array.isArray(t)&&t.length===0)this.options=new g([]);else if(D(t))this.options=new g(t.map(i=>({title:i,value:i})),{total:t.length});else if(W(t))this.options=new g(t,{total:t.length});else throw new Error(`<mg-input-combobox> prop "items" values must be the same type, string or Option. Passed value: ${d(t)}.`)}}watchIdentifier(t){k(t)&&(this.popoverId=`${t}-popover`,this.element.dataset.mgPopoverGuard=this.popoverId)}watchReadonly(t){t?this.classCollection.add(O):this.classCollection.delete(O)}watchValidityChange(t,i,e){this.input!==void 0&&(this.input[e]=t,this.checkValidity(),this.hasDisplayedError&&(this.setErrorMessage(),this.hasDisplayedError=!1))}watchDisabled(t){t?this.classCollection.add(C):this.classCollection.delete(C)}watchMgWidth(t){M.forEach(i=>{this.classCollection.delete(`mg-c-input--width-${i}`)}),t!==void 0&&this.classCollection.add(`mg-c-input--width-${this.mgWidth}`),this.classCollection=new E(this.classCollection.classes)}watchFetchUrl(t){t!==void 0&&this.loadingWrapper({name:"load-data"})}watchFetchOptions(t){if(this.fetchurl&&t&&!y(t))throw new Error(`<mg-input-combobox> prop "fetchoptions" value must be a valid RequestInit. Passed value: ${d(t)}.`)}watchFetchMappings(t){if(this.fetchurl!==void 0&&!y(t))throw new Error('<mg-input-combobox> prop "fetchmappings" is required with "fetchurl" prop.');if(t!==void 0&&!A(t))throw new Error(`<mg-input-combobox> prop "fetchmappings" value must be { request: RequestMappingType, response: ResponseMappingType }. Passed value: ${d(t)}.`)}watchOptions(t){this.page=t.getPage(0,this.filter.length>0?this.optionsFilter:void 0)}watchFilter(t){this.loadingWrapper({name:"load-data"}),this.filterChange.emit(t)}watchPopoverDisplay(t){t?(this.classCollection.add(this.classFocus),this.input.focus()):(this.option=null,this.filter=this.getValueTitle(),this.classCollection.delete(this.classFocus),this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))}async setFocus(){var t;(t=this.input)===null||t===void 0||t.focus()}displayError(){return new Promise(t=>{requestAnimationFrame(()=>{this.checkValidity(),this.setErrorMessage(),this.hasDisplayedError=this.invalid,t()})})}async setError(t,i,e=!1){if(typeof t!="boolean")throw new Error('<mg-input-combobox> method "setError()" param "valid" must be a boolean.');if(i!==void 0&&!k(i))throw new Error('<mg-input-combobox> method "setError()" param "errorMessage" must be a string.');this.customErrorMessage={lock:t?!1:e,message:t?void 0:i},this.setValidity(t),this.setErrorMessage(!0),this.hasDisplayedError=this.invalid}async reset(){if(!this.readonly)return this.setValue(null),this.option=null,this.filter="",new Promise(t=>{requestAnimationFrame(()=>{this.customErrorMessage={lock:!1},this.checkValidity(),this.errorMessage=void 0,this.hasDisplayedError=!1,t()})})}setValue(t){f(t)?D(this.items||this.options.items)?this.value=t.title:this.value=Object.assign({},t):this.value=""}setValidity(t){const i=this.valid;(!this.customErrorMessage.lock||this.customErrorMessage.message!==void 0&&!t)&&(this.valid=t),this.invalid=!this.valid,(this.handlerInProgress===void 0||this.handlerInProgress==="blur"&&this.valid!==i)&&this.inputValid.emit(this.valid)}componentWillLoad(){return this.messages=P(this.element).messages,this.watchIdentifier(this.identifier),this.watchItems(this.items),this.fetchurl!==void 0&&(this.watchFetchOptions(this.fetchoptions),this.watchFetchMappings(this.fetchmappings),this.loadingWrapper({name:"load-data"})),this.watchValue(this.value),this.watchOptions(this.options),this.watchMgWidth(this.mgWidth),this.watchReadonly(this.readonly),this.watchDisabled(this.disabled),setTimeout(()=>{this.checkValidity()},0)}render(){var t,i,e,o,s,r;const u=`${this.identifier}-list`,h=this.getValueTitle(),c=this.value&&!this.disabled;let p;((t=this.page)===null||t===void 0?void 0:t.items.length)>0?p="list":((i=this.page)===null||i===void 0?void 0:i.items.length)===0&&this.filter.length>0?p="notfound":((e=this.page)===null||e===void 0?void 0:e.items.length)===0&&(p="notavailable");let _;return((o=this.option)===null||o===void 0?void 0:o.value)!==void 0?_=this.option.value:typeof this.value=="string"?_=this.value:_=(s=this.value)===null||s===void 0?void 0:s.value,a("mg-input",{key:"bebf380dbdea1a9f9e0257a9425dcb6cd94a7a52",label:this.label,identifier:this.identifier,class:this.classCollection.classes.join(" "),ariaDescribedbyIDs:p&&p!=="list"?p:void 0,labelOnTop:this.labelOnTop,labelHide:this.labelHide,required:this.required,tooltip:this.tooltip,tooltipPosition:this.readonly&&this.value===void 0?"label":this.tooltipPosition,helpText:this.helpText,errorMessage:this.errorMessage},this.readonly?h&&a("b",{class:"mg-c-input__readonly-value"},h):a("mg-popover",{identifier:this.popoverId,placement:"bottom-start",display:this.popoverDisplay,"arrow-hide":!0,style:{"--mg-c-input-list-width":((r=this.input)===null||r===void 0?void 0:r.offsetWidth)>0?`${this.input.offsetWidth}px`:void 0},"data-fallback-placement":"bottom-end","onDisplay-change":this.handlePopoverDisplay},a("div",{class:"mg-c-input__input-group-container"},a("mg-icon",{icon:"magnifying-glass"}),a("input",{type:"text",role:"combobox",class:"mg-c-input__box mg-c-input__box--width",value:this.filter,id:this.identifier,name:this.name,placeholder:this.placeholder,title:this.placeholder,disabled:this.disabled,required:this.required,autocomplete:"off","aria-autocomplete":"list","aria-expanded":this.popoverDisplay.toString(),"aria-controls":u,"aria-invalid":(this.invalid===!0).toString(),"aria-activedescendant":x(_),onInput:this.handleFilterInput,onBlur:this.handleFilterBlur,onFocus:this.handleFilterFocus,onKeyDown:this.handleFilterKeydown,ref:l=>{l!==null&&(this.input=l)}}),c?a("mg-button",{class:"mg-c-input__box-append mg-c-input__reset",variant:"flat","is-icon":!0,label:this.messages.general.reset,"aria-controls":this.identifier,tabindex:"-1",onClick:this.handleResetButton},a("mg-icon",{icon:"cross"})):a("mg-button",{class:"mg-c-input__box-append",variant:"flat","is-icon":!0,label:this.itemsLabel,tabindex:"-1",disabled:this.disabled},a("mg-icon",{icon:`chevron-${this.popoverDisplay?"up":"down"}`}))),a("div",{slot:"content",class:"mg-c-input__popover-container"},p==="list"&&[a("ul",{key:"list",class:"mg-c-input__input-list",role:"listbox",id:u,"aria-label":this.itemsLabel,"aria-setsize":this.page.total},this.page.items.map(l=>{var w;return a("li",{role:"option",class:{"mg-c-input__input-list-item":!0,"mg-c-input__input-list-item--focus-visible":JSON.stringify((w=this.option)===null||w===void 0?void 0:w.value)===JSON.stringify(l.value),"mg-c-input__input-list-item--selected":this.isCurrentOption(l)},key:l.title,id:x(l.value),"aria-selected":this.isCurrentOption(l).toString(),onClick:this.handleOptionClick},l.title,this.isCurrentOption(l)&&a("mg-icon",{icon:"check"}))})),this.isLoading&&a("mg-loader",{key:"loader",message:this.messages.input.combobox.search,class:{"mg-u-visually-hidden":!!this.page.next}}),this.page.next&&a("mg-button",{key:"load-more",variant:"flat",class:"mg-c-input__load-more",tabIndex:-1,disabled:this.isLoading,"full-width":!0,"disable-on-click":!0,onClick:this.handleLoadMoreButton,"aria-controls":u,ref:l=>{l!==null&&(this.loadMoreElement=l)}},a("mg-icon",{icon:"chevron-down"}),this.messages.input.showMore)],p==="notfound"&&a("p",{id:p,class:"mg-c-input__popover-info"},this.messages.input.combobox.notFound),p==="notavailable"&&a("p",{id:p,class:"mg-c-input__popover-info"},this.messages.input.combobox.notAvailable))))}get element(){return F(this)}static get watchers(){return{value:["watchValue"],items:["watchItems"],identifier:["watchIdentifier"],readonly:["watchReadonly","watchValidityChange"],required:["watchValidityChange"],disabled:["watchValidityChange","watchDisabled"],mgWidth:["watchMgWidth"],fetchurl:["watchFetchUrl"],fetchoptions:["watchFetchOptions"],fetchmappings:["watchFetchMappings"],options:["watchOptions"],filter:["watchFilter"],popoverDisplay:["watchPopoverDisplay"]}}};L.style=T;export{L as mg_input_combobox};
