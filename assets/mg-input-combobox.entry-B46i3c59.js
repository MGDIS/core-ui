import{r as C,c as b,h as a,g as R}from"./iframe-D0BQJm5n.js";import{P as m,C as x,t as g,a as d,n as E,g as v,b as z,i as D,c as _,f as k,d as P}from"./index-C7xjtdiw-i2s6seYr.js";import{c as O,a as I,w as M}from"./mg-input.conf-DDnrE1hD-k6O0JpRm.js";import{i as T}from"./index-CNX6lq0x-CqaQyRKq.js";import{K as n}from"./events.utils-yMGqY8YG-B1zQ2iuP.js";import"./preload-helper-PPVm8Dsz.js";const F=".mg-c-input__box{height:var(--mg-b-size-min-height);box-sizing:border-box;padding:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2) var(--mg-b-size-8);border-width:var(--mg-c-input-border-width);border-style:solid;border-color:var(--mg-c-input-color-border);border-radius:var(--mg-c-input-border-radius);background-color:var(--mg-b-color-light);color:var(--mg-b-color-dark);font-family:inherit;font-size:var(--mg-b-font-size);text-align:var(--mg-c-input-text-align, left)}.mg-c-input__box::placeholder{color:var(--mg-c-input-placeholder-color-text);font-style:italic}.mg-c-input__box:focus{box-shadow:0 0 var(--mg-b-size-4) var(--mg-c-input-color-box-shadow-focus)}.mg-c-input__box:disabled{opacity:var(--mg-b-opacity-element-disabled)}.mg-c-input.mg-c-input--has-error .mg-c-input__box{border-color:var(--mg-b-color-danger)}.mg-c-input.mg-c-input--is-input-group-append{--mg-c-button-border-radius-top-left:0;--mg-c-button-border-radius-bottom-left:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box{margin-right:calc(-1*var(--mg-b-size-border));border-bottom-right-radius:0;border-top-right-radius:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box:focus-visible{outline-offset:-0.2rem;outline-style:solid;outline-width:.2rem}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]){--mg-c-button-border-radius-top-right:0;--mg-c-button-border-radius-bottom-right:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:not(:last-of-type)){--mg-c-button-border-right-width:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:last-of-type){--mg-c-button-border-radius-top-right:var(--mg-c-input-border-radius);--mg-c-button-border-radius-bottom-right:var(--mg-c-input-border-radius)}.mg-c-input.mg-c-input--is-append-input-slot-content:not(.mg-c-input--readonly) ::slotted([slot=append-input]){align-self:start;padding-top:calc((var(--mg-b-size-min-height) - var(--mg-b-size-16))/2)}.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container{position:relative}.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container>mg-icon:first-of-type{position:absolute;top:50%;left:var(--mg-b-size-8);color:var(--mg-c-input-color-icon);transform:translateY(-50%)}.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container .mg-c-input__box{padding-left:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2)}.mg-c-input__popover-info{padding:var(--mg-b-size-8);margin:0;color:var(--mg-b-color-neutral-90);text-align:center}.mg-c-input__input-container{width:100%;flex:1 auto}.mg-c-input.mg-c-input--width-full .mg-c-input__box{width:100%}.mg-c-input.mg-c-input--width-full .mg-c-input__input-group-container{width:100%;flex-grow:1}.mg-c-input.mg-c-input--width-2.mg-c-input--display-character-left .mg-c-input__input-group-container,.mg-c-input.mg-c-input--width-4.mg-c-input--display-character-left .mg-c-input__input-group-container,.mg-c-input.mg-c-input--width-16.mg-c-input--display-character-left .mg-c-input__input-group-container{width:max-content}.mg-c-input.mg-c-input--width-2 .mg-c-input__box{width:var(--mg-b-size-48)}.mg-c-input.mg-c-input--width-2.mg-c-input--text.mg-c-input--display-character-left .mg-c-input__box{width:calc(var(--mg-b-size-48) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-4 .mg-c-input__box{width:var(--mg-b-size-72)}.mg-c-input.mg-c-input--width-4.mg-c-input--text.mg-c-input--display-character-left .mg-c-input__box{width:calc(var(--mg-b-size-72) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-16 .mg-c-input__box{width:calc(26*var(--mg-b-size-8))}.mg-c-input.mg-c-input--width-16.mg-c-input--text.mg-c-input--display-character-left .mg-c-input__box{width:calc(calc(26 * var(--mg-b-size-8)) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-full:not(.mg-c-input--label-on-top){justify-content:stretch}.mg-c-input.mg-c-input--is-input-group-append ::slotted([slot=append-input]),.mg-c-input.mg-c-input--is-append-input-slot-content ::slotted([slot=append-input]){width:auto}:host(.mg-c-input.mg-c-input--width-full) ::slotted(*:not(mg-input-title)){width:100%;max-width:100%}.mg-c-input__readonly-value{min-height:var(--mg-b-font-size);align-self:flex-start;margin-top:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2);overflow-wrap:anywhere}.mg-u-visually-hidden{position:absolute !important;overflow:hidden !important;width:.1rem !important;height:.1rem !important;padding:0 !important;border:0 !important;margin:-0.1rem !important;clip:rect(0.1rem, 0.1rem, 0.1rem, 0.1rem) !important;clip-path:inset(50%) !important;white-space:nowrap !important}*:focus:not(:focus-visible){outline:none}@media (prefers-reduced-motion){*{animation:none !important;transition:none !important}}a{color:inherit;text-decoration:underline}a:hover,a:focus,a:active{text-decoration:none}.mg-c-input.mg-c-input--combobox mg-popover{--mg-c-card-overflow:hidden;--mg-c-popover-padding-vertical:0;--mg-c-popover-padding-horizontal:0}.mg-c-input.mg-c-input--combobox .mg-c-input__input-group-container{position:relative}.mg-c-input.mg-c-input--combobox .mg-c-input__box{cursor:pointer}.mg-c-input.mg-c-input--combobox .mg-c-input__popover-container{display:flex;min-width:var(--mg-c-input-list-width);max-height:calc(50*var(--mg-b-size-8) - var(--mg-b-size-32));flex-direction:column;gap:var(--mg-b-size-4);overflow-y:scroll}.mg-c-input.mg-c-input--combobox .mg-c-input__load-more{padding:0 var(--mg-b-size-8) var(--mg-b-size-4)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list{padding:0;margin:0;cursor:pointer;list-style:none}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item{display:flex;padding:var(--mg-b-size-8)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item:hover,.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--focus-visible{background-color:var(--mg-b-color-neutral-20)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected{font-weight:700}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected mg-icon{margin-left:auto}.mg-c-input.mg-c-input--combobox.mg-c-input--width-2 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-24) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-4 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-48) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-16 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + calc(23 * var(--mg-b-size-8)) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full mg-popover{--mg-c-popover-max-width:var(--mg-c-input-list-width, var(--mg-c-popover-max-width))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__input-group-container{display:flex;width:100%}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__box{flex:1}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box{padding-right:calc(var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box-append{position:absolute;top:0;right:0}",f=t=>t&&typeof t=="object"&&typeof t.title=="string"&&t.value!==void 0,W=t=>Array.isArray(t)&&t.every(f),A=t=>{const i=_(t)&&Object.hasOwn(t,"request")&&Object.hasOwn(t,"response");if(i){const{request:s,response:o}=t;if([s,o].some(h=>!_(h)))return!1;const e=typeof s.filter=="string"&&(s.filterTransform===void 0||typeof s.filterTransform=="function"),l=typeof o=="object"&&typeof o.total=="string"&&typeof o.items=="string"&&typeof o.next=="string"&&typeof o.itemTitle=="string"&&(typeof o.itemValue=="string"||o.itemValue===void 0);return e&&l}else return i},L=class{constructor(t){C(this,t),this.valueChange=b(this,"value-change",7),this.filterChange=b(this,"filter-change",7),this.showMore=b(this,"load-more",7),this.inputValid=b(this,"input-valid",7),this.fetchError=b(this,"fetch-error",7),this.hasDisplayedError=!1,this.customErrorMessage={lock:!1},this.name=this.identifier,this.labelOnTop=!1,this.labelHide=!1,this.required=!1,this.readonly=!1,this.disabled=!1,this.mgWidth="full",this.tooltipPosition="input",this.options=new m([]),this.filter="",this.classCollection=new x(["mg-c-input--combobox","mg-c-input--has-icon","mg-c-input--input-append"]),this.popoverDisplay=!1,this.handleOptionClick=i=>{this.setValue(this.options.items.find(s=>g(s.value)===i.target.dataset.value)),this.popoverDisplay=!1},this.handleResetButton=i=>{i.stopPropagation(),this.reset().then(()=>{this.input.focus()})},this.handlePopoverDisplay=i=>{this.popoverDisplay=i.detail},this.handleFilterInput=()=>{this.checkValidity(),this.hasDisplayedError&&this.setErrorMessage(),this.popoverDisplay||(this.popoverDisplay=!0),this.debounce||(this.debounce=!0,setTimeout(()=>{this.filter=this.input.value,this.debounce=!1},250))},this.handleFilterBlur=()=>{this.popoverDisplay||(this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))},this.handleFilterFocus=()=>{this.isLoading||(this.option=null)},this.handleLoadMoreButton=()=>{this.loadingWrapper({name:"load-more",cursor:d.NEXT}).then(()=>{this.input.focus()})},this.handleFilterKeydown=i=>{var s;if(this.disabled||i.ctrlKey||i.shiftKey)return;let o=!1;switch(i.key){case n.TAB:case n.ENTER:{o=i.key===n.ENTER;const e=(s=this.option)!==null&&s!==void 0?s:this.options.items.find(this.isCurrentOption);this.popoverDisplay&&this.setValue(e),this.popoverDisplay=!1;break}case n.DOWN:case n.ARROWDOWN:case n.UP:case n.ARROWUP:{if(o=!0,this.isLoading||this.page.total===0){this.popoverDisplay=!0;break}if(i.altKey&&[n.DOWN,n.ARROWDOWN].includes(i.key)){this.popoverDisplay=!0;break}let e;const l=this.popoverDisplay&&f(this.option);[n.DOWN,n.ARROWDOWN].includes(i.key)?e=l?d.NEXT:d.FIRST:[n.UP,n.ARROWUP].includes(i.key)&&(e=l?d.PREVIOUS:d.LAST),this.loadingWrapper({name:"scroll",cursor:e}),this.popoverDisplay=!0;break}case n.LEFT:case n.ARROWLEFT:case n.HOME:case n.RIGHT:case n.ARROWRIGHT:case n.END:{if(!f(this.option))break;o=!0,this.option=null;let e;n.HOME===i.key?e=0:n.END===i.key&&(e=this.filter.length),typeof e=="number"&&this.input.setSelectionRange(e,e);break}case n.ESC:case n.ESCAPE:{o=!0,this.popoverDisplay?this.popoverDisplay=!1:(this.setValue(null),this.filter="",this.option=null);break}default:{this.option=null;break}}o&&(i.stopPropagation(),i.preventDefault())},this.scrollToIndex=i=>{requestAnimationFrame(()=>{var s;this.popoverDisplay&&((s=this.element.shadowRoot.querySelector(`li:nth-of-type(${(i||0)+this.page.baseIndex})`))===null||s===void 0||s.scrollIntoView({block:"nearest"}))})},this.isCurrentOption=i=>(f(this.value)?this.value.value:this.value)===i.value,this.getValueTitle=()=>this.value&&f(this.value)?this.value.title:typeof this.value=="string"?this.value:"",this.checkValidity=()=>{this.setValidity(this.readonly||this.disabled||this.input.checkValidity())},this.setErrorMessage=(i=!1)=>{this.errorMessage=void 0,this.valid||(i||this.customErrorMessage.lock&&this.customErrorMessage.message!==void 0?this.errorMessage=this.customErrorMessage.message:this.input.validity.valueMissing&&(this.errorMessage=this.messages.errors.required))},this.getFirstPage=()=>this.options.getPage(0,i=>this.filter===""||i.title.toLocaleLowerCase().includes(this.filter.toLocaleLowerCase())),this.loadingWrapper=i=>{var s;let o,e;if((s=this.loadingAction)!==null&&s!==void 0||(this.loadingAction=i.name),this.option&&this.loadingAction!=="load-more"?e=this.page.items.findIndex(l=>g(l.value)===g(this.option.value)):this.loadingAction==="load-more"&&(e=this.page.items.length-this.page.baseIndex),i.name==="load-more")this.isLoading=!0,o=this.goToNextPage;else if(i.cursor===d.NEXT&&this.page.items.length<=this.page.total&&e+this.page.baseIndex===this.page.items.length&&e+this.page.baseIndex<this.page.total){this.loadMoreElement.click();return}else i.name==="scroll"?o=E:o=this.updatePage;return o().then(()=>{const l=this.filter===""?this.options.items:this.options.items.filter(h=>h.title.includes(this.filter));i.name!=="load-data"&&(e=this.page.getIndexFromCursor(i.cursor,this.loadingAction==="load-more"&&e>=0?l[e]:this.option)),this.option=l[e],this.scrollToIndex(e)}).finally(()=>{requestAnimationFrame(()=>{this.isLoading=!1,this.loadingAction=void 0})})},this.goToNextPage=()=>(this.showMore.emit(),this.fetchurl!==void 0?this.getOptions(typeof this.page.next=="string"?this.page.next:void 0).then(i=>{if(i!==void 0){const s=[...this.page.items,...i.items];this.options=new m(s,{total:i.total,next:i.next,top:s.length})}}):E(()=>{if(typeof this.page.next=="function"){const i=this.page.next();this.page=new P(Object.assign(Object.assign({},i),{items:[...this.page.items,...i.items]}))}})),this.updatePage=async()=>{if(this.fetchurl!==void 0)return this.getOptions().then(i=>{i!==void 0&&(this.options=new m(i.items,{total:i.total,next:i.next,top:i.top}))});this.page=this.getFirstPage()},this.getOptions=async(i=this.fetchurl)=>{const s=typeof this.fetchmappings.request.filterTransform=="function"?this.fetchmappings.request.filterTransform(this.filter):this.filter,o=(typeof i=="string"?i:i.toString()).replaceAll(this.fetchmappings.request.filter,encodeURIComponent(s));try{const e=await fetch(o,this.fetchoptions);if(!e.ok){this.fetchError.emit(new Error(`${e.status} - ${e.statusText}`));return}const l=await e.json(),h=v(l,this.fetchmappings.response.items).map(r=>{var u;return{title:v(r,this.fetchmappings.response.itemTitle),value:(u=v(r,this.fetchmappings.response.itemValue))!==null&&u!==void 0?u:r}}),y=Number(v(l,this.fetchmappings.response.total,0));let c=v(l,this.fetchmappings.response.next);if(URL.canParse(o)&&c&&!URL.canParse(c)){const r=new URL(o);r.pathname.endsWith(c.split("?")[0])&&(c=new URL(c,r).toString())}return{items:h,total:y,next:c,top:h.length}}catch(e){this.fetchError.emit(e)}}}watchValue(t){this.filter=this.getValueTitle(),this.valueChange.emit(t)}watchItems(t){if(!(this.fetchurl!==void 0&&t===void 0)){if(this.fetchurl!==void 0&&t!==void 0)throw new Error(`<mg-input-combobox> prop "items" values cannot be use with "fetchurl" prop defined. Passed value: ${g(t)}.`);if(Array.isArray(t)&&t.length===0)this.options=new m([]);else if(z(t))this.options=new m(t.map(i=>({title:i,value:i})),{total:t.length});else if(W(t))this.options=new m(t,{total:t.length});else throw new Error(`<mg-input-combobox> prop "items" values must be the same type, string or Option. Passed value: ${g(t)}.`)}}watchIdentifier(t){D(t)&&(this.popoverId=`${t}-popover`,this.element.dataset.mgPopoverGuard=this.popoverId)}watchReadonly(t){t?this.classCollection.add(O):this.classCollection.delete(O)}watchValidityChange(t,i,s){this.input!==void 0&&(this.input[s]=t,this.checkValidity(),this.hasDisplayedError&&(this.setErrorMessage(),this.hasDisplayedError=!1))}watchDisabled(t){t?this.classCollection.add(I):this.classCollection.delete(I)}watchMgWidth(t){M.forEach(i=>{this.classCollection.delete(`mg-c-input--width-${i}`)}),t!==void 0&&this.classCollection.add(`mg-c-input--width-${this.mgWidth}`),this.classCollection=new x(this.classCollection.classes)}watchFetchUrl(t){t!==void 0&&this.loadingWrapper({name:"load-data"})}watchFetchOptions(t){if(this.fetchurl&&t&&!_(t))throw new Error(`<mg-input-combobox> prop "fetchoptions" value must be a valid RequestInit. Passed value: ${g(t)}.`)}watchFetchMappings(t){if(this.fetchurl!==void 0&&!_(t))throw new Error('<mg-input-combobox> prop "fetchmappings" is required with "fetchurl" prop.');if(t!==void 0&&!A(t))throw new Error(`<mg-input-combobox> prop "fetchmappings" value must be { request: RequestMappingType, response: ResponseMappingType }. Passed value: ${g(t)}.`)}watchOptions(){this.page=this.getFirstPage()}watchFilter(t){this.loadingWrapper({name:"load-data"}),this.filterChange.emit(t)}watchPopoverDisplay(t){t?this.input.focus():(this.option=null,this.filter=this.getValueTitle(),this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))}async setFocus(){var t;(t=this.input)===null||t===void 0||t.focus()}displayError(){return new Promise(t=>{requestAnimationFrame(()=>{this.checkValidity(),this.setErrorMessage(),this.hasDisplayedError=this.invalid,t()})})}async setError(t,i,s=!1){if(typeof t!="boolean")throw new Error('<mg-input-combobox> method "setError()" param "valid" must be a boolean.');if(i!==void 0&&!D(i))throw new Error('<mg-input-combobox> method "setError()" param "errorMessage" must be a string.');this.customErrorMessage={lock:t?!1:s,message:t?void 0:i},this.setValidity(t),this.setErrorMessage(!0),this.hasDisplayedError=this.invalid}async reset(){if(!this.readonly)return this.setValue(null),this.option=null,this.filter="",new Promise(t=>{requestAnimationFrame(()=>{this.customErrorMessage={lock:!1},this.checkValidity(),this.errorMessage=void 0,this.hasDisplayedError=!1,t()})})}setValue(t){f(t)?z(this.items||this.options.items)?this.value=t.title:this.value=Object.assign({},t):this.value=""}setValidity(t){const i=this.valid;(!this.customErrorMessage.lock||this.customErrorMessage.message!==void 0&&!t)&&(this.valid=t),this.invalid=!this.valid,(this.handlerInProgress===void 0||this.handlerInProgress==="blur"&&this.valid!==i)&&this.inputValid.emit(this.valid)}componentWillLoad(){return this.messages=T(this.element).messages,this.watchIdentifier(this.identifier),this.watchItems(this.items),this.fetchurl!==void 0&&(this.watchFetchOptions(this.fetchoptions),this.watchFetchMappings(this.fetchmappings),this.loadingWrapper({name:"load-data"})),this.watchValue(this.value),this.watchOptions(),this.watchMgWidth(this.mgWidth),this.watchReadonly(this.readonly),this.watchDisabled(this.disabled),setTimeout(()=>{this.checkValidity()},0)}render(){var t,i,s,o,e,l;const h=`${this.identifier}-list`,y=this.getValueTitle(),c=this.value&&!this.disabled;let r;((t=this.page)===null||t===void 0?void 0:t.items.length)>0?r="list":((i=this.page)===null||i===void 0?void 0:i.items.length)===0&&this.filter.length>0?r="notfound":((s=this.page)===null||s===void 0?void 0:s.items.length)===0&&(r="notavailable");let u;return((o=this.option)===null||o===void 0?void 0:o.value)!==void 0?u=this.option.value:typeof this.value=="string"?u=this.value:u=(e=this.value)===null||e===void 0?void 0:e.value,a("mg-input",{key:"fd5a59f1e0bf31342a3bf935a60a2877e5df1772",label:this.label,identifier:this.identifier,class:this.classCollection.classes.join(" "),ariaDescribedbyIDs:r&&r!=="list"?r:void 0,labelOnTop:this.labelOnTop,labelHide:this.labelHide,required:this.required,tooltip:this.tooltip,tooltipPosition:this.readonly&&this.value===void 0?"label":this.tooltipPosition,helpText:this.helpText,errorMessage:this.errorMessage},this.readonly?y&&a("b",{class:"mg-c-input__readonly-value"},y):a("mg-popover",{identifier:this.popoverId,placement:"bottom-start",display:this.popoverDisplay,"arrow-hide":!0,style:{"--mg-c-input-list-width":((l=this.input)===null||l===void 0?void 0:l.offsetWidth)>0?`${this.input.offsetWidth}px`:void 0},"data-fallback-placement":"bottom-end","onDisplay-change":this.handlePopoverDisplay},a("div",{class:"mg-c-input__input-group-container"},a("mg-icon",{icon:"magnifying-glass"}),a("input",{type:"text",role:"combobox",class:"mg-c-input__box mg-c-input__box--width",value:this.filter,id:this.identifier,name:this.name,placeholder:this.placeholder,title:this.placeholder,disabled:this.disabled,required:this.required,autocomplete:"off","aria-autocomplete":"list","aria-expanded":this.popoverDisplay.toString(),"aria-controls":h,"aria-invalid":(this.invalid===!0).toString(),"aria-activedescendant":k(u),onInput:this.handleFilterInput,onBlur:this.handleFilterBlur,onFocus:this.handleFilterFocus,onKeyDown:this.handleFilterKeydown,ref:p=>{p!==null&&(this.input=p)}}),c?a("mg-button",{class:"mg-c-input__box-append mg-c-input__reset",variant:"flat","is-icon":!0,label:this.messages.general.reset,"aria-controls":this.identifier,tabindex:"-1",onClick:this.handleResetButton},a("mg-icon",{icon:"cross"})):a("mg-button",{class:"mg-c-input__box-append",variant:"flat","is-icon":!0,label:this.itemsLabel,tabindex:"-1",disabled:this.disabled},a("mg-icon",{icon:`chevron-${this.popoverDisplay?"up":"down"}`}))),a("div",{slot:"content",class:"mg-c-input__popover-container"},r==="list"&&[a("ul",{key:"list",class:"mg-c-input__input-list",role:"listbox",id:h,"aria-label":this.itemsLabel,"aria-setsize":this.page.total},this.page.items.map(p=>{var w;return a("li",{role:"option",class:{"mg-c-input__input-list-item":!0,"mg-c-input__input-list-item--focus-visible":JSON.stringify((w=this.option)===null||w===void 0?void 0:w.value)===JSON.stringify(p.value),"mg-c-input__input-list-item--selected":this.isCurrentOption(p)},key:p.title,id:k(p.value),"aria-selected":this.isCurrentOption(p).toString(),"data-value":g(p.value),onClick:this.handleOptionClick},p.title,this.isCurrentOption(p)&&a("mg-icon",{icon:"check"}))})),this.isLoading&&a("mg-loader",{key:"loader",message:this.messages.input.combobox.search,class:{"mg-u-visually-hidden":!!this.page.next}}),this.page.next&&a("mg-button",{key:"load-more",variant:"flat",class:"mg-c-input__load-more",tabIndex:-1,disabled:this.isLoading,"full-width":!0,"disable-on-click":!0,onClick:this.handleLoadMoreButton,"aria-controls":h,ref:p=>{p!==null&&(this.loadMoreElement=p)}},a("mg-icon",{icon:"chevron-down"}),this.messages.input.showMore)],r==="notfound"&&a("p",{id:r,class:"mg-c-input__popover-info"},this.messages.input.combobox.notFound),r==="notavailable"&&a("p",{id:r,class:"mg-c-input__popover-info"},this.messages.input.combobox.notAvailable))))}get element(){return R(this)}static get watchers(){return{value:["watchValue"],items:["watchItems"],identifier:["watchIdentifier"],readonly:["watchReadonly","watchValidityChange"],required:["watchValidityChange"],disabled:["watchValidityChange","watchDisabled"],mgWidth:["watchMgWidth"],fetchurl:["watchFetchUrl"],fetchoptions:["watchFetchOptions"],fetchmappings:["watchFetchMappings"],options:["watchOptions"],filter:["watchFilter"],popoverDisplay:["watchPopoverDisplay"]}}};L.style=F;export{L as mg_input_combobox};
