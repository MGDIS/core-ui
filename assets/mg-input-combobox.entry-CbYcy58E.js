import{r as F,c as f,h as a,g as P}from"./iframe-a__NqWOS.js";import{P as g,C as z,f as E,a as m,i as v,n as O,g as b,t as w,b as C,c as I,d as M}from"./index-WtiuOkLj-C6DxXKrY.js";import{C as D,c as k,a as R,w as T}from"./mg-input.conf-BAUTlb6r-x3flyXSW.js";import{i as V}from"./index-CKB-AnCZ-CJn8Sf3f.js";import{K as o,d as W}from"./mg-input.utils-BYI03zSi-Cje7odI7.js";const A=".mg-c-input__error-details{margin:0}.mg-c-input__box{height:var(--mg-b-size-min-height);box-sizing:border-box;padding:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2) var(--mg-b-size-8);border-width:var(--mg-c-input-border-width);border-style:solid;border-color:var(--mg-c-input-color-border);border-radius:var(--mg-c-input-border-radius);background-color:var(--mg-b-color-light);color:var(--mg-b-color-dark);font-family:inherit;font-size:var(--mg-b-font-size);text-align:var(--mg-c-input-text-align, left)}.mg-c-input__box::placeholder{color:var(--mg-c-input-placeholder-color-text);font-style:italic}.mg-c-input__box:focus{box-shadow:0 0 var(--mg-b-size-4) var(--mg-c-input-color-box-shadow-focus)}.mg-c-input__box:disabled{opacity:var(--mg-b-opacity-element-disabled)}.mg-c-input.mg-c-input--has-error .mg-c-input__box{border-color:var(--mg-b-color-danger)}.mg-c-input.mg-c-input--is-input-group-append{--mg-c-button-border-radius-top-left:0;--mg-c-button-border-radius-bottom-left:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box{margin-right:calc(-1*var(--mg-b-size-border));border-bottom-right-radius:0;border-top-right-radius:0}.mg-c-input.mg-c-input--is-input-group-append .mg-c-input__box:focus-visible{outline-offset:-0.2rem;outline-style:solid;outline-width:.2rem}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]){--mg-c-button-border-radius-top-right:0;--mg-c-button-border-radius-bottom-right:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:not(:last-of-type)){--mg-c-button-border-right-width:0}.mg-c-input.mg-c-input--has-buttons-group-append ::slotted([slot=append-input]:last-of-type){--mg-c-button-border-radius-top-right:var(--mg-c-input-border-radius);--mg-c-button-border-radius-bottom-right:var(--mg-c-input-border-radius)}.mg-c-input.mg-c-input--is-append-input-slot-content:not(.mg-c-input--readonly) ::slotted([slot=append-input]){align-self:start;padding-top:calc((var(--mg-b-size-min-height) - var(--mg-b-size-16))/2)}.mg-c-input.mg-c-input--has-icon .mg-c-input__with-character-left>mg-icon:first-of-type,.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container>mg-icon:first-of-type{position:absolute;top:50%;left:var(--mg-b-size-8);color:var(--mg-c-input-color-icon);transform:translateY(-50%)}.mg-c-input.mg-c-input--has-icon .mg-c-input__with-character-left .mg-c-input__box,.mg-c-input.mg-c-input--has-icon .mg-c-input__input-group-container .mg-c-input__box{padding-left:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2)}.mg-c-input__popover-info{padding:var(--mg-b-size-8);margin:0;color:var(--mg-b-color-neutral-90);text-align:center}.mg-c-input__input-container{width:100%;flex:1 auto}.mg-c-input.mg-c-input--width-full .mg-c-input__box{width:100%}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left,.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left,.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left{width:max-content}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left:has(textarea),.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left:has(textarea),.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left:has(textarea){flex-grow:inherit}.mg-c-input.mg-c-input--width-2 .mg-c-input__box{width:var(--mg-b-size-48)}.mg-c-input.mg-c-input--width-2 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(var(--mg-b-size-48) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-4 .mg-c-input__box{width:var(--mg-b-size-72)}.mg-c-input.mg-c-input--width-4 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(var(--mg-b-size-72) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-16 .mg-c-input__box{width:calc(26*var(--mg-b-size-8))}.mg-c-input.mg-c-input--width-16 .mg-c-input__with-character-left:not(:has(textarea)) .mg-c-input__box{width:calc(calc(26 * var(--mg-b-size-8)) + var(--mg-c-character-left-message-length)*(.35ch + .3rem))}.mg-c-input.mg-c-input--width-full:not(.mg-c-input--label-on-top){justify-content:stretch}.mg-c-input.mg-c-input--is-input-group-append ::slotted([slot=append-input]),.mg-c-input.mg-c-input--is-append-input-slot-content ::slotted([slot=append-input]){width:auto}:host(.mg-c-input.mg-c-input--width-full) ::slotted(*:not(mg-input-title)){width:100%;max-width:100%}.mg-c-input__readonly-value{min-height:var(--mg-b-font-size);align-self:flex-start;margin-top:calc((var(--mg-b-size-min-height) - var(--mg-b-font-size)*var(--mg-b-line-height))/2);overflow-wrap:anywhere}.mg-u-visually-hidden{position:absolute !important;overflow:hidden !important;width:.1rem !important;height:.1rem !important;padding:0 !important;border:0 !important;margin:-0.1rem !important;clip:rect(0.1rem, 0.1rem, 0.1rem, 0.1rem) !important;clip-path:inset(50%) !important;white-space:nowrap !important}*:focus:not(:focus-visible){outline:none}@media (prefers-reduced-motion){*{animation:none !important;transition:none !important}}a{color:inherit;text-decoration:underline}a:hover,a:focus,a:active{text-decoration:none}.mg-c-input.mg-c-input--combobox mg-popover{--mg-c-card-overflow:hidden;--mg-c-popover-padding-vertical:0;--mg-c-popover-padding-horizontal:0}.mg-c-input.mg-c-input--combobox .mg-c-input__input-group-container{position:relative}.mg-c-input.mg-c-input--combobox .mg-c-input__box:not(:disabled){cursor:pointer}.mg-c-input.mg-c-input--combobox .mg-c-input__popover-container{display:flex;min-width:var(--mg-c-input-list-width);max-height:calc(50*var(--mg-b-size-8) - var(--mg-b-size-32));flex-direction:column;gap:var(--mg-b-size-4);overflow-y:scroll}.mg-c-input.mg-c-input--combobox .mg-c-input__load-more{padding:0 var(--mg-b-size-8) var(--mg-b-size-4)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list{padding:0;margin:0;cursor:pointer;list-style:none}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item{display:flex;padding:var(--mg-b-size-8)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item:hover,.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--focus-visible{background-color:var(--mg-b-color-neutral-20)}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected{font-weight:700}.mg-c-input.mg-c-input--combobox .mg-c-input__input-list-item.mg-c-input__input-list-item--selected mg-icon{margin-left:auto}.mg-c-input.mg-c-input--combobox.mg-c-input--width-2 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-24) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-4 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + var(--mg-b-size-48) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-16 .mg-c-input__box{width:calc(var(--mg-b-size-16) + var(--mg-b-size-8)*2 + calc(23 * var(--mg-b-size-8)) + var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full mg-popover{--mg-c-popover-max-width:var(--mg-c-input-list-width, var(--mg-c-popover-max-width))}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__input-group-container{display:flex;width:100%}.mg-c-input.mg-c-input--combobox.mg-c-input--width-full .mg-c-input__box{flex:1}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box{padding-right:calc(var(--mg-b-size-min-height) + var(--mg-b-size-4))}.mg-c-input.mg-c-input--combobox.mg-c-input--input-append .mg-c-input__box-append{position:absolute;top:0;right:0}",d=t=>t&&typeof t=="object"&&typeof t.title=="string"&&t.value!==void 0,N=t=>Array.isArray(t)&&t.every(d),L=t=>{const i=v(t)&&Object.hasOwn(t,"request")&&Object.hasOwn(t,"response");if(i){const{request:e,response:s}=t;if([e,s].some(r=>!v(r)))return!1;const n=typeof e.filter=="string",p=typeof s=="object"&&typeof s.total=="string"&&typeof s.items=="string"&&typeof s.next=="string"&&typeof s.itemTitle=="string"&&(typeof s.itemValue=="string"||s.itemValue===void 0);return n&&p}else return i},q=class{constructor(t){F(this,t),this.valueChange=f(this,"value-change",7),this.filterChange=f(this,"filter-change",7),this.showMore=f(this,"load-more",7),this.inputValid=f(this,"input-valid",7),this.fetchError=f(this,"fetch-error",7),this.classFocus="mg-u-is-focused",this.hasDisplayedError=!1,this.name=this.identifier,this.labelOnTop=!1,this.labelHide=!1,this.required=!1,this.readonly=!1,this.disabled=!1,this.mgWidth="full",this.tooltipPosition="input",this.options=new g([]),this.filter="",this.classCollection=new z(["mg-c-input--combobox","mg-c-input--has-icon","mg-c-input--input-append"]),this.popoverDisplay=!1,this.handleOptionClick=i=>{this.setValue(this.options.items.find(e=>E(e.value)===i.target.id)),this.popoverDisplay=!1},this.handleResetButton=i=>{i.stopPropagation(),this.reset().then(()=>{this.input.focus()})},this.handlePopoverDisplay=i=>{this.popoverDisplay=i.detail},this.handleFilterInput=()=>{this.checkValidity(),this.hasDisplayedError&&this.setErrorMessage(),this.popoverDisplay||(this.popoverDisplay=!0),this.debounce||(this.debounce=!0,setTimeout(()=>{this.filter=this.input.value,this.debounce=!1},250))},this.handleFilterBlur=()=>{this.popoverDisplay||(this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))},this.handleFilterFocus=()=>{this.isLoading||(this.option=null)},this.handleLoadMoreButton=()=>{this.loadingWrapper({name:"load-more",cursor:m.NEXT}).then(()=>{this.input.focus()})},this.handleFilterKeydown=i=>{if(this.disabled||i.ctrlKey||i.shiftKey)return;let e=!1;switch(i.key){case o.TAB:case o.ENTER:e=i.key===o.ENTER;const s=this.option||this.options.items.find(this.isCurrentOption);this.popoverDisplay&&this.setValue(s),this.popoverDisplay=!1;break;case o.DOWN:case o.ARROWDOWN:case o.UP:case o.ARROWUP:if(e=!0,this.isLoading||!(this.page.total>0)){this.popoverDisplay=!0;break}if(i.altKey&&[o.DOWN,o.ARROWDOWN].includes(i.key)){this.popoverDisplay=!0;break}let n;const p=this.popoverDisplay&&d(this.option);[o.DOWN,o.ARROWDOWN].includes(i.key)?n=p?m.NEXT:m.FIRST:[o.UP,o.ARROWUP].includes(i.key)&&(n=p?m.PREVIOUS:m.LAST),this.loadingWrapper({name:"scroll",cursor:n}),this.popoverDisplay=!0;break;case o.LEFT:case o.ARROWLEFT:case o.HOME:case o.RIGHT:case o.ARROWRIGHT:case o.END:if(!d(this.option))break;e=!0,this.option=null;let r;o.HOME===i.key?r=0:o.END===i.key&&(r=this.filter.length),typeof r=="number"&&this.input.setSelectionRange(r,r);break;case o.ESC:case o.ESCAPE:e=!0,this.popoverDisplay?this.popoverDisplay=!1:(this.setValue(null),this.filter="",this.option=null);break;default:this.option=null;break}e&&(i.stopPropagation(),i.preventDefault())},this.scrollToIndex=i=>{requestAnimationFrame(()=>{var e;this.popoverDisplay&&((e=this.element.shadowRoot.querySelector(`li:nth-of-type(${(i||0)+this.page.baseIndex})`))===null||e===void 0||e.scrollIntoView({block:"nearest"}))})},this.isCurrentOption=i=>(d(this.value)?this.value.value:this.value)===i.value,this.getValueTitle=()=>this.value&&d(this.value)?this.value.title:typeof this.value=="string"?this.value:"",this.hasNoValueError=()=>this.customError===D.NoValue,this.checkValidity=()=>{this.setValidity(this.readonly||this.disabled)},this.setErrorMessage=()=>{this.errorMessage=void 0,this.valid||(this.customError!==void 0&&!Object.values(D).includes(this.customError)?this.errorMessage=this.customError:this.hasNoValueError()?this.errorMessage=this.messages.errors.noValue:this.input.validity.valueMissing&&(this.errorMessage=this.messages.errors.required))},this.resetErrorMessage=()=>{this.checkValidity(),this.errorMessage=void 0,this.hasDisplayedError=!1},this.optionsFilter=i=>this.filter===""?!0:i.title.toLocaleLowerCase().includes(this.filter.toLocaleLowerCase()),this.loadingWrapper=i=>{let e,s;if(this.loadingAction||(this.loadingAction=i.name),this.option&&this.loadingAction!=="load-more"?s=this.page.items.findIndex(n=>n.value.toString()===this.option.value.toString()):this.loadingAction==="load-more"&&(s=this.page.items.length-this.page.baseIndex),i.name==="load-more")this.isLoading=!0,e=this.goToNextPage;else if(i.cursor===m.NEXT&&this.page.items.length<=this.page.total&&s+this.page.baseIndex===this.page.items.length&&s+this.page.baseIndex<this.page.total){this.loadMoreElement.click();return}else i.name==="scroll"?e=O:e=this.updatePage;return e().then(()=>{const n=this.options.items.filter(this.optionsFilter);i.name!=="load-data"&&(s=this.page.getIndexFromCursor(i.cursor,this.loadingAction==="load-more"&&s>=0?n[s]:this.option)),this.option=n[s],this.scrollToIndex(s)}).finally(()=>{requestAnimationFrame(()=>{this.isLoading=!1,this.loadingAction=void 0})})},this.goToNextPage=()=>(this.showMore.emit(),this.fetchurl!==void 0?this.getOptions(typeof this.page.next=="string"?this.page.next:void 0).then(i=>{if(v(i)){const e=[...this.page.items,...i.items];this.options=new g(e,{total:i.total,next:i.next,top:e.length})}}):O(()=>{if(typeof this.page.next=="function"){const i=this.page.next();this.page=new M(Object.assign(Object.assign({},i),{items:[...this.page.items,...i.items]}))}})),this.updatePage=async()=>{if(this.fetchurl!==void 0)return this.getOptions().then(i=>{v(i)&&(this.options=new g(i.items,{total:i.total,next:i.next,top:i.top}),this.filter.length===0&&i.total===0?this.displayError():this.invalid&&this.hasNoValueError()&&this.resetErrorMessage())});this.page=this.options.getPage(0,this.optionsFilter)},this.getOptions=async(i=this.fetchurl)=>{const e=(typeof i=="string"?i:i.toString()).replaceAll(this.fetchmappings.request.filter,encodeURIComponent(this.filter));try{const s=await fetch(e,this.fetchoptions);if(!s.ok){this.fetchError.emit(new Error(`${s.status} - ${s.statusText}`)),this.displayError();return}const n=await s.json(),p=[],r=b(n,this.fetchmappings.response.items,p).map(l=>({title:b(l,this.fetchmappings.response.itemTitle,typeof l=="string"?l:JSON.stringify(l)),value:b(l,this.fetchmappings.response.itemValue,l)})),y=Number(b(n,this.fetchmappings.response.total,p.length));let u=b(n,this.fetchmappings.response.next);if(URL.canParse(e)&&u&&!URL.canParse(u)){const l=new URL(e);l.pathname.endsWith(u.split("?")[0])&&(u=new URL(u,l).toString())}return{items:r,total:y,next:u,top:r.length}}catch(s){this.fetchError.emit(s),this.displayError()}}}watchValue(t){this.filter=this.getValueTitle(),this.valueChange.emit(t)}watchItems(t){if(!(![void 0,null].includes(this.fetchurl)&&[void 0,null].includes(t))){if(![void 0,null].includes(this.fetchurl)&&Array.isArray(t))throw new Error(`<mg-input-combobox> prop "items" values cannot be use with "fetchurl" prop defined. Passed value: ${w(t)}.`);if([void 0,null].includes(t)||Array.isArray(t)&&t.length===0)this.options=new g([]),this.displayError();else if(C(t))this.options=new g(t.map(i=>({title:i,value:i})),{total:t.length}),this.invalid&&this.hasNoValueError()&&this.resetErrorMessage();else if(N(t))this.options=new g(t,{total:t.length}),this.invalid&&this.hasNoValueError()&&this.resetErrorMessage();else throw new Error(`<mg-input-combobox> prop "items" values must be the same type, string or Option. Passed value: ${w(t)}.`)}}watchIdentifier(t){t&&(this.popoverId=`${t}-popover`,this.element.dataset.mgPopoverGuard=this.popoverId)}watchReadonly(t){t?this.classCollection.add(k):this.classCollection.delete(k)}watchValidityChange(t,i,e){this.input!==void 0&&(this.input[e]=t,this.checkValidity(),this.hasDisplayedError&&(this.setErrorMessage(),this.hasDisplayedError=!1))}watchDisabled(t){t?this.classCollection.add(R):this.classCollection.delete(R)}watchMgWidth(t){T.forEach(i=>{this.classCollection.delete(`mg-c-input--width-${i}`)}),t!==void 0&&this.classCollection.add(`mg-c-input--width-${this.mgWidth}`),this.classCollection=new z(this.classCollection.classes)}watchFetchUrl(t){t&&this.loadingWrapper({name:"load-data"})}watchFetchOptions(t){if(this.fetchurl&&t&&!v(t))throw new Error(`<mg-input-combobox> prop "fetchoptions" value must be a valid RequestInit. Passed value: ${w(t)}.`);new Request(this.fetchurl,t)}watchFetchMappings(t){if(this.fetchurl&&!t)throw new Error('<mg-input-combobox> prop "fetchmappings" is required with "fetchurl" prop.');if(t&&!L(t))throw new Error(`<mg-input-combobox> prop "fetchmappings" value must be { request: RequestMappingType, response: ResponseMappingType }. Passed value: ${w(t)}.`)}watchOptions(t){this.page=t.getPage(0,this.filter.length>0?this.optionsFilter:void 0)}watchFilter(t){this.loadingWrapper({name:"load-data"}),this.filterChange.emit(t)}watchPopoverDisplay(t){t?(this.classCollection.add(this.classFocus),this.input.focus()):(this.option=null,this.filter=this.getValueTitle(),this.classCollection.delete(this.classFocus),this.handlerInProgress="blur",this.displayError().finally(()=>{this.handlerInProgress=void 0}))}async setFocus(){var t;(t=this.input)===null||t===void 0||t.focus()}displayError(){return new Promise(t=>{requestAnimationFrame(()=>{this.checkValidity(),this.setErrorMessage(),this.hasDisplayedError=this.invalid,t()})})}async setError(t,i){if(typeof t!="boolean")throw new Error('<mg-input-combobox> method "setError()" param "valid" must be a boolean.');if(I(i))this.setValidity(t,i),this.setErrorMessage(),this.hasDisplayedError=this.invalid;else throw new Error('<mg-input-combobox> method "setError()" param "errorMessage" must be a string.')}async reset(){if(!this.readonly)return this.setValue(null),this.option=null,this.filter="",new Promise(t=>{requestAnimationFrame(()=>{this.resetErrorMessage(),t()})})}setValue(t){d(t)?C(this.items||this.options.items)?this.value=t.title:this.value=Object.assign({},t):this.value=""}setValidity(t,i){var e;const s=this.valid;let n=t;!n&&this.input!==void 0&&(this.customError=void 0,I(i)?this.customError=i:(this.fetchurl===void 0?((e=this.items)!==null&&e!==void 0?e:[]).length:this.page.total)===0&&(this.customError=D.NoValue),n=this.input.checkValidity()&&this.customError===void 0),this.valid=n,this.invalid=!this.valid,(this.handlerInProgress===void 0||this.handlerInProgress==="blur"&&this.valid!==s)&&this.inputValid.emit(this.valid)}componentWillLoad(){return this.messages=V(this.element).messages,this.watchIdentifier(this.identifier),this.watchItems(this.items),this.fetchurl&&(this.watchFetchOptions(this.fetchoptions),this.watchFetchMappings(this.fetchmappings),this.loadingWrapper({name:"load-data"})),this.watchValue(this.value),this.watchOptions(this.options),this.watchMgWidth(this.mgWidth),this.watchReadonly(this.readonly),this.watchDisabled(this.disabled),setTimeout(()=>{this.checkValidity()},0)}render(){var t,i,e,s,n,p;const r=`${this.identifier}-list`,y=this.getValueTitle(),u=this.value&&!this.disabled,l=this.disabled||this.hasNoValueError();let c;((t=this.page)===null||t===void 0?void 0:t.items.length)>0?c="list":((i=this.page)===null||i===void 0?void 0:i.items.length)===0&&this.filter.length>0?c="notfound":((e=this.page)===null||e===void 0?void 0:e.items.length)===0&&(c="notavailable");let _;return[null,void 0].includes((s=this.option)===null||s===void 0?void 0:s.value)?typeof this.value=="string"?_=this.value:_=(n=this.value)===null||n===void 0?void 0:n.value:_=this.option.value,a("mg-input",{key:"fa0977713a1150c39b4f989bbb139e0e345b4c5f",label:this.label,identifier:this.identifier,class:this.classCollection.classes.join(" "),ariaDescribedbyIDs:c&&c!=="list"?c:void 0,labelOnTop:this.labelOnTop,labelHide:this.labelHide,required:this.required,tooltip:this.tooltip,tooltipPosition:this.readonly&&this.value===void 0?"label":this.tooltipPosition,helpText:this.helpText,errorMessage:W(this.errorMessage,this.noValueErrorDetail)},this.readonly?y&&a("b",{class:"mg-c-input__readonly-value"},y):a("mg-popover",{identifier:this.popoverId,placement:"bottom-start",display:this.popoverDisplay,"arrow-hide":!0,style:{"--mg-c-input-list-width":!((p=this.input)===null||p===void 0)&&p.offsetWidth?`${this.input.offsetWidth}px`:void 0},"data-fallback-placement":"bottom-end","onDisplay-change":this.handlePopoverDisplay},a("div",{class:"mg-c-input__input-group-container"},a("mg-icon",{icon:"magnifying-glass"}),a("input",{type:"text",role:"combobox",class:"mg-c-input__box mg-c-input__box--width",value:this.filter,id:this.identifier,name:this.name,placeholder:this.placeholder,title:this.placeholder,disabled:l,required:this.required,autocomplete:"off","aria-autocomplete":"list","aria-expanded":this.popoverDisplay.toString(),"aria-controls":r,"aria-invalid":(this.invalid===!0).toString(),"aria-activedescendant":E(_),onInput:this.handleFilterInput,onBlur:this.handleFilterBlur,onFocus:this.handleFilterFocus,onKeyDown:this.handleFilterKeydown,ref:h=>{h!==null&&(this.input=h)}}),u?a("mg-button",{class:"mg-c-input__box-append mg-c-input__reset",variant:"flat","is-icon":!0,label:this.messages.general.reset,"aria-controls":this.identifier,tabindex:"-1",onClick:this.handleResetButton,disabled:l},a("mg-icon",{icon:"cross"})):a("mg-button",{class:"mg-c-input__box-append",variant:"flat","is-icon":!0,label:this.itemsLabel,tabindex:"-1",disabled:l},a("mg-icon",{icon:`chevron-${this.popoverDisplay?"up":"down"}`}))),a("div",{slot:"content",class:"mg-c-input__popover-container"},c==="list"&&[a("ul",{key:"list",class:"mg-c-input__input-list",role:"listbox",id:r,"aria-label":this.itemsLabel,"aria-setsize":this.page.total},this.page.items.map(h=>{var x;return a("li",{role:"option",class:{"mg-c-input__input-list-item":!0,"mg-c-input__input-list-item--focus-visible":JSON.stringify((x=this.option)===null||x===void 0?void 0:x.value)===JSON.stringify(h.value),"mg-c-input__input-list-item--selected":this.isCurrentOption(h)},key:h.title,id:E(h.value),"aria-selected":this.isCurrentOption(h).toString(),onClick:this.handleOptionClick},h.title,this.isCurrentOption(h)&&a("mg-icon",{icon:"check"}))})),this.isLoading&&a("mg-loader",{key:"loader",message:this.messages.input.combobox.search,class:{"mg-u-visually-hidden":!!this.page.next}}),this.page.next&&a("mg-button",{key:"load-more",variant:"flat",class:"mg-c-input__load-more",tabIndex:-1,disabled:this.isLoading,"full-width":!0,"disable-on-click":!0,onClick:this.handleLoadMoreButton,"aria-controls":r,ref:h=>{h!==null&&(this.loadMoreElement=h)}},a("mg-icon",{icon:"chevron-down"}),this.messages.input.showMore)],c==="notfound"&&a("p",{id:c,class:"mg-c-input__popover-info"},this.messages.input.combobox.notFound),c==="notavailable"&&a("p",{id:c,class:"mg-c-input__popover-info"},this.messages.input.combobox.notAvailable))))}get element(){return P(this)}static get watchers(){return{value:["watchValue"],items:["watchItems"],identifier:["watchIdentifier"],readonly:["watchReadonly","watchValidityChange"],required:["watchValidityChange"],disabled:["watchValidityChange","watchDisabled"],mgWidth:["watchMgWidth"],fetchurl:["watchFetchUrl"],fetchoptions:["watchFetchOptions"],fetchmappings:["watchFetchMappings"],options:["watchOptions"],filter:["watchFilter"],popoverDisplay:["watchPopoverDisplay"]}}};q.style=A;export{q as mg_input_combobox};
