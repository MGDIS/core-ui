## Usage

Use mg-form to build clean forms.  
The component manages:

- the spacing between inputs
- the required fields message

## Behavior

### Required field(s) message

This message is automatically generated by the component.

- If there is only 1 required input (among other inputs)

  > Field with a \* is required

- If there are many required inputs (among other inputs)

  > Fields with a \* are required

- If there is only 1 input and it is required

  > The field is required

  In this case, the \* is hidden on input labels.

- If all inputs are required

  > All fields are required

  In this case, the \* is hidden on input labels.

## Combining `mg-input-*` with legacy libraries

If you are creating a form that combines `mg-components` inputs with inputs from one of our legacy libraries (e.g., form, ui-components, ui-components-vuejs), you can achieve consistent styling by applying the `mg-u-form-legacy` class to the `mg-form` element. This ensures that `mg-input-*` components behave in accordance with Bootstrap styling conventions.

```html
<mg-form class="form-horizontal mg-u-form-legacy">
  <text-field
    label="Text field label"
    reference="reference"
    help="Text field tooltip"
  ></text-field>
  <mg-input-text
    label="Mg input text label"
    identifier="identifier"
    tooltip="Mg input text tooltip"
  ></mg-input-text>
</mg-form>

```

## üëç Good practices

### Enabling _submit_ button

You can disable the _submit button_ until all required fields are filled. To do this, use the "valid/invalid" options.

## üí• Troubleshooting

### axe-core: `aria-valid-attr` error for `aria-role` props

#### Issue

When we run a unit test with axe-core on an `<mg-form />` element, we can get the following error: [`aria-valid-attr`](https://github.com/dequelabs/axe-core/blob/develop/doc/rule-descriptions.md).

#### Workaround

To pass the test with the `<mg-form />` property `aria-role`, you need to bind this `prop` as a framework JS property, for example:
- Vue: `<mg-form :aria-role.prop="presentation"></mg-form>`
- Angular: `<mg-form ng-prop-aria-role="presentation"></mg-form>`
- JSX: `<mg-form ariaRole={"presentation"}></mg-form>`

#### Explanation

When you use JS property binding instead of an HTML attribute, the component prop isn't rendered in the DOM, which results in valid HTML DOM semantics and passes the test.

## Example

**Code example does not reflect all the code.**

Here we have a `form-valid` event listener on the `mg-form` to determine if the "submit" button should be enabled or not. The "Display errors" button uses the `mg-form` `displayError()` method.

<!-- Auto Generated Below -->


## Properties

| Property          | Attribute          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Type                                             | Default               |
| ----------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ | --------------------- |
| `ariaRole`        | `aria-role`        | Define `<form/>` element aria role see more about aria roles use case: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles                                                                                                                                                                                                                                                                                                                                                                                                                    | `"form" \| "none" \| "presentation" \| "search"` | `undefined`           |
| `disabled`        | `disabled`         | Define if form is disabled                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `boolean`                                        | `false`               |
| `identifier`      | `identifier`       | Identifier is used for the element ID (id is a reserved prop in Stencil.js) If not set, it will be created.                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                         | `createID('mg-form')` |
| `invalid`         | `invalid`          | Define form invalid state                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `boolean`                                        | `undefined`           |
| `labelOnTop`      | `label-on-top`     | Define if slotted mg-component's label are displayed on top                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `boolean`                                        | `undefined`           |
| `name`            | `name`             | Input name If not set the value equals the identifier                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                         | `this.identifier`     |
| `readonly`        | `readonly`         | Define if form is readonly                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `boolean`                                        | `false`               |
| `requiredMessage` | `required-message` | Define when required message is display. When it is unset, component use it internal logic to manage "required message" help text display. When you set the prop to `default`, you override the component internal logique to torce it display "required message" help text. When you set the prop to `hide`, it will prevent the rendering of the message in the component's DOM. As **this element is an accessibility requirement in the view**, you **MUST*** re-implement this message on your own and display it when your form contains required inputs. | `"default" \| "hide"`                            | `undefined`           |
| `valid`           | `valid`            | Define form valid state                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `boolean`                                        | `undefined`           |


## Events

| Event         | Description                                                        | Type                   |
| ------------- | ------------------------------------------------------------------ | ---------------------- |
| `form-submit` | Emitted event on form submit                                       | `CustomEvent<boolean>` |
| `form-valid`  | Emitted event on form validity check Tells if form is valid or not | `CustomEvent<boolean>` |


## Methods

### `displayError() => Promise<void>`

Display input error if it exists.

#### Returns

Type: `Promise<void>`



### `reset() => Promise<void>`

Reset form inputs values, validity and error state

#### Returns

Type: `Promise<void>`




## Slots

| Slot        | Description     |
| ----------- | --------------- |
|             | Form content    |
| `"actions"` | Actions content |


## CSS Custom Properties

| Name                             | Description                                                                        |
| -------------------------------- | ---------------------------------------------------------------------------------- |
| `--mg-c-form-inputs-title-width` | Defines the width of the input title. Fallback on `calc(28 * var(--mg-b-size-8))`. |


----------------------------------------------

*Built with [StencilJS](https://stenciljs.com/)*
