import { Meta } from '@storybook/blocks';

<Meta title="Molecules/Inputs/mg-input" />

# Inputs

## UX

### Label

- The label is located on the left of the input field.
- The text is to be right aligned.
- The label can be on one or more lines.
- The label can be positioned above the input field.

### Input help

The message displayed indicates the format expected by the input field "example: email@provider.com" or "expected format: DD/MM/YYYY (ex: 13/04/2019)"

### Message order

When the messages are displayed under the field the order is as follows:

1. input help
2. error

### Placeholder

The placeholder should not be used as an input help.  
â™¿ RGAA: The placeholder is not considered a valid label under the RGAA so is not subject to a contrast ratio.

### Read only

- The value is no longer editable.
- The input field no longer has a border or background.
- The value is displayed in bold.
- If there is no value entered, nothing is displayed.

### Required field

The asterisk is displayed regardless of the status of the field: input, read-only, disabled.

### Pattern

Please ensure to consider this when using regular expressions in your components.

Since mid-2023, there have been updates to the regular expressions used in native inputs. Browsers now uses the 'v' flag instead of the 'u' flag.  
Consequently, all literal characters must be escaped, and there's no longer a need to use the `^` and `$` characters to indicate the start and end of the string.

For exemple this RegExp working using the 'u' flag `^[\d ()+]*$` should be converted to the corresponding 'v' flag `[\d\s\(\)\+]` on our components. You can get more info on the [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/pattern#overview).

If needed, this library has been identified for converting regular expressions: [regexpu-core](https://www.npmjs.com/package/regexpu-core).

## Specs

### Positioning of "i" icon

![](./doc/img/mg-input-tooltip-position.png)

By default, the "i" icon is positioned next to the input field.

You can position it next to the label by using the `tooltip-placement` prop with the value `label`.

When `label-on-top` is enabled, the "i" icon moves next to the label, overriding the `tooltip-placement` setting.

When the `label-hide` prop is enabled, the "i" icon moves next to the input, overriding the `tooltip-placement` setting.

### Value positioning

By default, the value is left aligned, you can change the CSS variable `--mg-c-input-text-align` to right align.

### Responsive

![](./doc/img/mg-input-responsive.png)

When the viewport width is less than 768px, the label is stacked above the input field.

If you are creating a form that combines mg-components inputs with inputs from one of our legacy libraries (such as form, ui-components, ui-components-vuejs), please refer to [this section on mg-form](.?path=/docs/molecules-mg-form--docs#combining-mg-input--with-legacy-libraries).

### Errors

Input field border and error message text are in [@color-danger](./?path=/docs/style-colors--docs).
Error message background is a variant of [@color-danger](./?path=/docs/style-colors--docs) : #FEF6F6 or HSL (357,80%,98%).

## Behavior

### Errors

Error is triggered and displayed when we leave the input field.

When we enter in an input field with an error its state is checked everytime the user update its content, when the error is fixed the message disapears.

## CSS Variables

If needed some [variables](./?path=/docs/css-variables--docs) are available to customize the component:

- `--mg-c-input-text-align`: Define input text alignement, numeric input default is `right`, others inputs default is `left`
- `--mg-c-input-border-width`: Define input border witdh, default: `0.1rem`
- `--mg-c-input-border-radius`: Define input border radius, default: `0.3rem`
- `--mg-c-input-color`: Define input border an placeholder color, default: `#b5c2c9`
- `--mg-c-input-spacer`: Define input space between label, input, tooltip, etc., default: `1rem`
- `--mg-c-input-error-bg-color`: Define input error message backround color, default: `var(--mg-b-color-danger-h), calc(var(--mg-b-color-danger-s) + 5%), calc(var(--mg-b-color-danger-l) + 49%)`
- `--mg-c-input-color-shadow-focus-hsl`: Define input shadow when focused, default: `188, 100%, 50%`
- `--mg-c-input-title-width`: Define input label width, default: `23rem`
- `--mg-c-input-margin-bottom`: Define input bottom margin, default: `1.5rem`
- `--mg-c-input-title-horizontal-space`: Define space between label and input when inside a `mg-form`, default: `3rem`
